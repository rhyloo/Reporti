#+title: Reporti: TI-Inspired LaTeX Template.
#+latex_class_options: 
#+latex_class: reporti
#+options: toc:nil author:nil date:nil title:nil ::nil prop:nil ^:nil
#+language: es
#+PROPERTY: header-args :results silent :tangle ./reporti.cls

#+LATEX:\subtitle{LaTeX Template}
#+LATEX:\author{Rhyloo - \href{mailto:jorge2@uma.es}{jorge2@uma.es}}
#+LATEX:\contact{\href{mailto:jorge2@uma.es}{Feedback about the documentation.}}
#+LATEX:\logo{rhyloo_solutions_horizontal.pdf}

#+LATEX:\type{README}
#+LATEX:\projectcode{REPORTI_DOC_TEMPLATE_V0.0}

#+LATEX:\summary{}

#+LATEX:\notes{PurePath Digital, Equibit are trademarks of Texas Instruments.\\ Excel is a trademark of Microsoft Corporation.}

#+LATEX:\cover[width=1.35\textwidth][continue]


* Motivation

When I was at college I had to read a lot of datasheets and documentation from different manufacturers of electronics (i. e. Texas Instruments, Analog Devices, Microchip and others...). My favorite and inspiration/copy is Texas Instruments.

I really enjoy reading the docs from them!

I would like to understand how their docs are made, which is the department that do them and why they are not using LaTeX... 

* Features

** Cover page
Just trying to keep it simple. A .cls file based on report class.

About features, the cover can be customize with the next commands: Check [[test_code]]
#+Name:test_code
#+CAPTION: test_code
#+begin_src latex :tangle no
\type{Name of doc type}
\code{Project Number/Code} % For more info. Look for naming conventions
\titulo{Project title} 
\autor{Author}
\subtitulo{Subtitle}
\resumen{Summary}
\notes{Some notes in Cover}
\contact{Contact footnote}
#+end_src

** Table
** Images
#+Name: test
#+Caption: testt
[[./figures/logo/rhyloo_solutions_horizontal.pdf]]

* About images
The file ~Logo-EII-horizontal.pdf~ doesn't have any type of LICENSE on the [[https://www.uma.es/escuela-de-ingenierias-industriales/info/108566/logo-simbolo-de-la-eii/][web]]. As master's student I can use, maybe you don't, be careful with it.

I am really interested in naming conventions applied to projects. I think is the first part of a good story, I define two names the first is common use and the second is like a code, i.e Fat-Man is the bomb, but if I said Fat-Man-DOC-123HAJK123

Do you have one for owns?? Explain in comments and discuss the best :D

Examples:
- Texas Instruments have names like: TAS5518-5261K2EVM. According to Deepseek
  - TAS: Indicates a Texas Instruments Audio Solution
  - 5518: The specific model number of the IC.
  - 5261: A code unique to the EVM design
  - K2: Likely denotes a revision or variant of the EVM
  - EVM: Standard suffix for Evaluation Module

IMO is the first part of a good story like "MarkII" or "Apollo"


* About document class

#+begin_src latex
\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{reporti}[Template LaTeX based on Texas Instruments note application documentation.]
\LoadClass[10pt, a4paper, twoside]{article}
#+end_src

#+begin_src latex
\DeclareOption{draft}{
    \PassOptionsToPackage{draft}{graphicx}
    \AtEndOfClass{\usepackage{draftwatermark}\SetWatermarkText{DRAFT}}
}
\DeclareOption*{\PassOptionsToClass{\CurrentOption}{article}}
\ProcessOptions\relax
#+end_src

** Packages
I added package geometry becuase I need to config headheight, and page geometry:
#+begin_src latex
\RequirePackage{geometry}      % Configuración de márgenes
\setlength{\headheight}{50pt} % 32.05278pt mínimo requerido + margen de seguridad
\geometry{top=3cm, bottom=2.5cm, left=1.83cm, right=1.83cm, footskip=1.2cm}
#+end_src
Encabezados/pies de página. I defined two styles.
1. mainstyle: Used for full document elaboration
2. tocstyle: Used by tocs.
#+begin_src latex
\RequirePackage{fancyhdr}      
\fancypagestyle{mainstyle}{
  \fancyhf{}
  
  \renewcommand{\headrulewidth}{2pt}
  \renewcommand{\footrulewidth}{1.5pt}
  
  \ifdefvoid{\@logo}{}{
    \fancyhead[RE,LO]{\includegraphics[height=2em]{\@logo}\par
      \href{www.rhyloo.com}{www.rhyloo.com}\par\par}
  }
  
  \fancyhead[LE,RO]{\nouppercase{\rightmark}}
  \fancyfoot[LE]{{\fontsize{8}{35}\selectfont\thepage\hspace{0.8cm}\itshape\@title}}
  \ifdefvoid{\@contact}{
    \fancyfoot[RE,LO]{{\fontsize{8}{35}\selectfont
        \ifdefvoid{\@projectcode}{}{\@projectcode}}}}{%
    \fancyfoot[RE,LO]{{\fontsize{8}{35}\selectfont \ifdefvoid{\@projectcode}{}{\@projectcode}\\\itshape\@contact}}
  }
  \fancyfoot[RO]{{\fontsize{8}{35}\selectfont  \itshape\@title \hspace{0.8cm} \thepage}}
}

\fancypagestyle{tocstyle}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{2pt}
  \renewcommand{\footrulewidth}{1.5pt}
  \ifdefvoid{\@logo}{}{%
    \fancyhead[RE,LO]{\includegraphics[height=2em]{\@logo}\par
      \href{www.rhyloo.com}{www.rhyloo.com}}
  }
  \fancyhead[LE,RO]{}
  \fancyfoot[LE]{{\fontsize{8}{35}\selectfont \thepage \hspace{0.8cm} \itshape\@title}}
  \ifdefvoid{\@contact}{\fancyfoot[RE,LO]{{\fontsize{8}{35}\selectfont \ifdefvoid{\@projectcode}{}{\@projectcode}}}}{%
    \fancyfoot[RE,LO]{{\fontsize{8}{35}\selectfont \ifdefvoid{\@projectcode}{}{\@projectcode}\\\itshape\@contact}}
  }
  \fancyfoot[RO]{{\fontsize{8}{35}\selectfont  \itshape\@title \hspace{0.8cm} \thepage}}
}

#+end_src

#+begin_src latex
\RequirePackage{xparse}        % Para comandos avanzados
#+end_src

#+begin_src latex
\RequirePackage{titlesec}      % Estilos de secciones
\RequirePackage{graphicx}      % Manejo de imágenes
\RequirePackage[spanish]{babel}% Localización

\RequirePackage{hyperref}      % Hipervínculos
\hypersetup{
    colorlinks = true,
    linkcolor = blue!70!black,
    urlcolor = blue!70!black,
    citecolor = green!60!black
}


\RequirePackage{fontspec}      % Fuentes modernas
\setmainfont{FreeSans}



\RequirePackage{datetime2}     % Manejo de fechas profesional
\RequirePackage{xcolor}        % Manejo de colores
\RequirePackage{etoolbox}      % Utilidades de macros
\RequirePackage{tabularx}
\RequirePackage{float}
\RequirePackage{booktabs}
\RequirePackage{multirow}
\RequirePackage[titles]{tocloft}
\RequirePackage[tableposition=above]{caption}
\RequirePackage[figure,table]{totalcount}
\RequirePackage{xstring} % Add near the top of the file
\RequirePackage{underscore}
\RequirePackage{longtable}
\RequirePackage{wrapfig}
\RequirePackage{rotating}
\RequirePackage[normalem]{ulem}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{capt-of}

\RequirePackage[newfloat,outputdir=./build]{minted}
\usemintedstyle{emacs}
\newlistof{listing}{lol}{\hfill\bfseries\normalsize Lista de códigos\hfill}
\RequirePackage{caption}
\newenvironment{code}{\captionsetup{type=listing}}{}
\SetupFloatingEnvironment{listing}{%
  name={Code},
  fileext=lol}
\renewcommand{\cftlistingpresnum}{Code~}
\renewcommand{\thelisting}{\arabic{section}-\arabic{listing}.}
\setlength{\cftlistingnumwidth}{5em}


% Configuración de datetime2 para español
\DTMsetup{useregional=numeric}

\graphicspath{{figures/}{figures/logo/}}
#+end_src

** Doument Commands
#+begin_src latex
\newcommand{\@metadata}{} % Registro de metadatos

\NewDocumentCommand{\autor}{m}{%
    \def\@autor{#1}%
    \listadd{\@metadata}{Autor: #1}%
}
\NewDocumentCommand{\fecha}{O{\DTMtoday}}{%
    \def\@fecha{#1}%
    \listadd{\@metadata}{Fecha: #1}%
}
\NewDocumentCommand{\summary}{m}{%
    \def\@summary{#1}%
    \ifx\@summary\@empty\else
        \gappto\@afterabstract{\@printsummary}%
    \fi
}
\NewDocumentCommand{\subtitle}{m}{%
    \def\@subtitle{#1}%
    \listadd{\@metadata}{Subtítulo: #1}%  % Opcional: para mostrar en metadata
}
\NewDocumentCommand{\type}{m}{%
    \def\@type{#1}%
    \listadd{\@metadata}{Type: #1}%  % Opcional: para mostrar en metadata
}

\NewDocumentCommand{\projectcode}{m}{%
    \def\@projectcode{#1}%
    \listadd{\@metadata}{Projectcode: #1}%  % Opcional: para mostrar en metadata
}
\NewDocumentCommand{\notes}{m}{%
    \def\@notes{#1}%
    \listadd{\@metadata}{Notes: #1}%  % Opcional: para mostrar en metadata
}
\NewDocumentCommand{\contact}{m}{%
    \def\@contact{#1}%
    \listadd{\@metadata}{Contact: #1}%  % Opcional: para mostrar en metadata
}
\NewDocumentCommand{\toc}{m}{%
    \def\@toc{#1}%
    \listadd{\@metadata}{TOC: #1}%  % Opcional: para mostrar en metadata
}
\NewDocumentCommand{\logo}{m}{%
    \def\@logo{#1}%
    \listadd{\@metadata}{LOGO: #1}%  % Opcional: para mostrar en metadata
}


\renewcommand{\sectionmark}[1]{\markright{#1}}




% --- Redefinir marcas para ignorar subsecciones ---
\renewcommand{\sectionmark}[1]{\markright{#1}} % Actualiza solo \rightmark
\renewcommand{\subsectionmark}[1]{} % Subsecciones no modifican los headers


\pagestyle{mainstyle}


\fancypagestyle{titlepagestyle}{
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{1.5pt}
  \fancyhf{}
  \fancyfoot[LE]{{\fontsize{8}{35}\selectfont \thepage \hspace{0.8cm} \itshape\@title}}
  \ifdefvoid{\@contact}{  \fancyfoot[RE,LO]{{\fontsize{8}{35}\selectfont \ifdefvoid{\@projectcode}{}{\@projectcode}}}}{
  \fancyfoot[RE,LO]{{\fontsize{8}{35}\selectfont \ifdefvoid{\@projectcode}{}{\@projectcode}\\\itshape\@contact}}}
  \fancyfoot[RO]{{\fontsize{8}{35}\selectfont  \itshape\@title \hspace{0.8cm} \normalfont\thepage}}
}




% ========================
% 4. Estilos de Títulos
% ========================
\setlength{\voffset}{10pt} % Ajusta según necesidad para evitar warnings
\setlength{\headsep}{5pt} % Ajusta según necesidad para evitar warnings

% Definir formato de títulos
\titleformat{\section}
  {\large\bfseries} % Formato del texto
  {\thesection.\hspace{2em}}   % Etiqueta: Número + 4em de espacio
  {0pt}                        % Separación entre etiqueta y título
  {}                           % Código antes del título

\titleformat{\subsection}
  {\large\itshape\bfseries}
  {\thesubsection.\hspace{1.25em}} % 3em de espacio
  {0pt}
  {}

\titleformat{\subsubsection}
  {\bfseries}
  {\hspace{3.5em}} % 2em de espacio
  {0pt}
  {}

% Ajustar espaciado vertical (opcional)
\titlespacing{\section}{0pt}{12pt}{6pt}
\titlespacing{\subsection}{0pt}{12pt}{6pt}
\titlespacing{\subsubsection}{0pt}{12pt}{6pt}



\newlength{\originalparskip}
% ========================
% 6. Cover
% ========================
\NewDocumentCommand{\cover}{O{width=0.8\textwidth} O{}}{%
  \begingroup % Grupo local para cambios de espaciado
  % Save the original parskip value
  \setlength{\originalparskip}{\parskip}
  \renewcommand{\baselinestretch}{0.4} % Ajuste principal (20% más de espacio)
  \renewcommand{\parskip}{\originalparskip} % Ajuste principal (20% más de espacio)
  \begin{titlepage}
  \thispagestyle{titlepagestyle} % <--- Aplica el footer
    % --------------------------
    % Cabecera con logo y datos institucionales
  % --------------------------
  \ifdefvoid{\@logo}
            {\vspace*{4em}}{}
  \noindent\begin{minipage}[t]{0.4\textwidth}
  \ifdefvoid{\@logo}
            {}
            {\includegraphics[#1]{\@logo}}
    %% \vspace{-1.5\baselineskip} % Alineación precisa
    \end{minipage}%
    \hfill
    \begin{minipage}[t]{0.6\textwidth}
      \vspace{-2\baselineskip} % Alineación precisa
      \raggedleft
      \ifdef{\@type}{\fontsize{14}{35}\selectfont\itshape\@type}{}\par
      \ifdef{\@projectcode}{\fontsize{9}{35}\selectfont\itshape\@projectcode}{}

    \end{minipage}
    
    \vspace{0.5\baselineskip} % Alineación precisa

    \begin{flushright}
      {\fontsize{18}{35}\selectfont\bfseries\itshape\@title}
    \end{flushright}
    \vspace*{-1\baselineskip} % Reduce espacio posterior
        {\rule{\textwidth}{2pt}}

        \noindent\begin{minipage}{0.7\textwidth}
        \raggedright
        \ifdef{\@author}{%
          {\fontsize{10}{35}\selectfont\itshape\@author}
        }{}
        \end{minipage}
        \hfill
        \begin{minipage}{0.25\textwidth}
        \raggedleft
        \ifdef{\@subtitle}{%
          {\fontsize{10}{35}\selectfont\itshape\@subtitle}
        }{}
        \end{minipage}

        % --------------------------
        % Summary condicional
        % --------------------------
        \ifdefvoid{\@summary}{}{%
          \vspace{0.75cm}

          \hspace{1.75cm}
          \begin{minipage}{13.6cm}
            \begin{center}
              \noindent{\bfseries ABSTRACT}
              \end{center}
            {\fontsize{10}{35}\selectfont\@summary}\par
            {\rule{\textwidth}{1pt}}
          \end{minipage}
        }
        \ifstrequal{#2}{continue}{
          \tocloftpagestyle{titlepagestyle}
          \vspace{0.75cm}

          \hspace{1.75cm}
          \begin{minipage}{13.6cm}
            {\fontsize{9}{35}\selectfont
              \tableofcontents
              \vspace{1em}
              \iftotalfigures
              \listoffigures
              \fi
              \vspace{1em}
              \iftotaltables
              \listoftables
              \fi
              \iftotallistings
              \listoflistings
              \fi}
          \end{minipage}}{}
        \vfill
        \ifdefvoid{\@notes}{}{%
          \noindent\raggedright{\fontsize{8}{35}\selectfont\@notes\vspace{-1\baselineskip}}}
  \end{titlepage}
  \endgroup
  \clearpage
  \pagestyle{mainstyle}
}

\AddToHook{cmd/section/before}{%
  \clearpage
}

\tocloftpagestyle{tocstyle}
\setlength{\cftbeforesecskip}{0pt}
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cftdotsep}{1}% Default is 4.5

\renewcommand{\cftaftertoctitleskip}{2em}
\renewcommand{\cftafterloftitleskip}{2em}
\renewcommand{\cftafterlottitleskip}{2em}

\renewcommand{\cftfigindent}{0pt}
\renewcommand{\cftfigpresnum}{\figurename~}
\renewcommand{\cftfigaftersnum}{.}
\setlength{\cftfignumwidth}{5em}
\renewcommand{\thefigure}{\arabic{section}-\arabic{figure}}
\renewcommand{\cftsecpagefont}{\normalsize}


% =============================================
% List of Tables Customization
% =============================================
% 1. Set table numbering format: section-table (e.g., 1-1)
\renewcommand{\thetable}{\arabic{section}-\arabic{table}}

% 2. Configure table entries in List of Tables
\renewcommand{\cfttabindent}{0pt}               % Remove indentation
\renewcommand{\cfttabpresnum}{\tablename~}      % Prefix: "Table "
\renewcommand{\cfttabaftersnum}{.}              % Suffix: "."
\setlength{\cfttabnumwidth}{5em}                % Width for table numbers

% 3. (Optional) Set section page numbers in TOC
\renewcommand{\cftsecpagefont}{\normalsize}     % Normal font for section page numbers




\setlength{\parindent}{0pt}
\setlength{\baselineskip}{50pt}
\renewcommand{\baselinestretch}{1.2} % Ajuste principal (20% más de espacio)


\makeatletter
\apptocmd{\@afterheading}{
  \vspace{-0.5\baselineskip}
  \setlength{\parskip}{12pt}
  }{}{}
\makeatother

\addto\captionsspanish{%
  \renewcommand{\contentsname}{\hfill\bfseries\normalsize Contenido\hfill}
  \renewcommand{\tablename}{Tabla}
\renewcommand{\listfigurename}{\hfill\bfseries\normalsize Lista de figuras\hfill}
\renewcommand{\listtablename}{\hfill\bfseries\normalsize Lista de tablas\hfill}}


#+end_src

* Export Configuration                                 :noexport:
#+begin_src emacs-lisp :tangle no
;; Prefer minted for source code export in LaTeX.
(setq org-latex-listings (quote minted))

;; Prefex `xelatex' as the LaTeX processor.
(setq org-latex-compiler "xelatex")

;; Make sure that LaTeX knows about the `minted' package: we take care
;; of it in `org-latex-packages-alist' and we do *NOT* want to include
;; it explicitly as a #+LATEX_HEADER, since the options may differ, in
;; which case the two inclusions will conflict.
(setq org-latex-packages-alist '(("outputdir=./build" "minted" nil)))

;; `org-latex-pdf-process' is a list of shell commands. We take advantage of that
;; to:
;;   - create the `build' subdirectory if it is not present
;;   - run `latexmk' with the proper options (in particular `-shell-escape' which i
;;     necessary in order to allow the LaTeX processor to run an external program,
;;     like `pygmentize' in the case of `minted'; and `-output-directory' to allow
;;     all the artifacts to be sent there)
;;   - finally, move the `.pdf' file to the parent directory of the `build' subdirectory
;;     so that the exporter will be able to find it and not complain.
;; Note also that `%latex' is replaced by the value of `org-latex-compiler' so we use
;; `xelatex' as our LaTeX processor.
(setq org-latex-pdf-process '("mkdir -p build"
                              "latexmk -f -pdf -%latex -shell-escape -interaction=nonstopmode -output-directory=%o/build %f"
                              "mv %o/build/%b.pdf %O"))
  #+end_src
* COMMENT Local variables
Local Variables:
eval: (add-hook 'after-save-hook
(lambda ()
(run-with-idle-timer
0.1 nil  ; espera 0.1 segundos antes de ejecutar el tangle
(lambda ()
(org-babel-tangle))))
nil t)
End:

